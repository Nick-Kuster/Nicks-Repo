--CREATE DATABASE cru;


CREATE TABLE Role (
	RoleId	 uniqueidentifier PRIMARY KEY,
	RoleName nvarchar(30)
);

CREATE TABLE ApplicationUser (
	UserId 	 uniqueidentifier PRIMARY KEY,
	UserName nvarchar(30),
	Password nvarchar(50),
	CreationDate datetime2
);


CREATE TABLE Role_ApplicationUser ( 
	RoleId uniqueidentifier FOREIGN KEY REFERENCES Role(RoleId),
	UserId uniqueidentifier FOREIGN KEY REFERENCES ApplicationUser(UserId),
	CONSTRAINT PK_RoleApplicationUser PRIMARY KEY (RoleId, UserId)
);

CREATE TABLE UserAuditTrail ( 
	UserAuditTrailId uniqueidentifier PRIMARY KEY,
	UserId			 uniqueidentifier FOREIGN KEY REFERENCES ApplicationUser(UserId),
	AuditDate		 datetime2,
	Description		 nvarchar(max)
);

CREATE TABLE Contact (
	ContactId uniqueidentifier PRIMARY KEY,
	FName	nvarchar(255),
	LName	nvarchar(255),
	MPhone	nvarchar(20),
	HPhone	nvarchar(20),
	OPhone	nvarchar(20),
	Street	nvarchar(255),
	City	nvarchar(255),
	State	nvarchar(2),
	Zip		nvarchar(20)
);

CREATE TABLE Claim ( 
	ClaimId		uniqueidentifier PRIMARY KEY,
	DateCreated datetime2,
	DateOfClaim datetime2,
	Description nvarchar(max)

);

CREATE TABLE Vehicle( 
	VehicleId	uniqueidentifier PRIMARY KEY,
	Make		nvarchar(255),
	Model		nvarchar(255),
	Year		nvarchar(4),
	Color		nvarchar(20),
	ContactId	uniqueidentifier FOREIGN KEY REFERENCES Contact(ContactId)

);
CREATE TABLE ClaimContactVehicle (
	ClaimId   uniqueidentifier NOT NULL FOREIGN KEY REFERENCES Claim(ClaimId),
	ContactId   uniqueidentifier NOT NULL FOREIGN KEY REFERENCES Contact(ContactId),
	VehicleId uniqueidentifier NOT NULL FOREIGN KEY REFERENCES Vehicle(VehicleId),
	CONSTRAINT PK_ClaimContactVehicle PRIMARY KEY (ClaimId, ContactId, VehicleId)
);


INSERT INTO Claim  VALUES ('E4E2FCFB-FC46-4744-AAA3-8151D1D56D75', GETDATE(), GETDATE(), 'Hit and run');
INSERT INTO Claim  VALUES ('991D7A79-4EE8-43A0-9001-784835607EEF', GETDATE(), GETDATE(), 'Hit in parking lot');
INSERT INTO Claim  VALUES ('56C2411F-68F6-416A-B17A-4C8980D82E97', GETDATE(), GETDATE(), 'Fender Bender');
INSERT INTO Claim  VALUES ('5892BA02-D5F1-4DCC-8EB2-AAEAE9931C21', GETDATE(), GETDATE(), 'Hurricane Damage');

INSERT INTO Contact VALUES ('350A15DC-EE20-42DD-8E76-444E988F589A', 'Nick', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('622766F2-52F2-436D-ABFE-B86DB69FC3B4', 'Bill', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('8D797824-1338-4D0C-95DC-E4A87C12BC40', 'Bobby', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('D4416202-7F2D-4CA4-BA9C-A6930922B9EC', 'Jill', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('314817A6-FF64-4C0A-92F0-05C4CE0B967F, 'Jack', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('D2F51AC3-C2E1-429D-90F9-B5A349F9317D', 'Justin', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('C1950744-92D8-4EB8-9A64-F16FC581505E', 'Jeremy', 'Kuster', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');
INSERT INTO Contact VALUES ('826E3E6E-695F-498F-A519-EF20766D8E19, 'Luke', 'Skywalker', '330-204-3686', '', '', '325 Leatherman Rd.', 'Wadsworth', 'OH', '44281');

INSERT INTO Vehicle VALUES('AFF05F6E-A7EA-4734-876E-831705D22C17', 'Dodge', 'Dakota', '1989', 'Green', '826E3E6E-695F-498F-A519-EF20766D8E19');
INSERT INTO Vehicle VALUES('AA5ABA8B-7A04-4FA9-9F07-6AFE8025C2D5', 'Honda', 'Civic', '2001', 'Red', '826E3E6E-695F-498F-A519-EF20766D8E19');
INSERT INTO Vehicle VALUES('8A3FD3F7-A49C-4547-BB29-18E3A7219DD7', 'Hyundai', 'Sonata', '2013', 'Blue', 'D2F51AC3-C2E1-429D-90F9-B5A349F9317D');
INSERT INTO Vehicle VALUES('0B28AAF8-F362-47A6-97F3-576B3BBFF948', 'Dodge', 'Ram', '2007', 'White', 'D2F51AC3-C2E1-429D-90F9-B5A349F9317D');
INSERT INTO Vehicle VALUES('21CE9BF4-2BD5-4399-9880-200A7332CAA8', 'Subaru', 'Outback', '2015', 'Green', 'C1950744-92D8-4EB8-9A64-F16FC581505E');
INSERT INTO Vehicle VALUES('2270CD4D-CC29-4B92-A805-A7AD30FA559B', 'Honda', 'Civic', '2001', 'Black', '8D797824-1338-4D0C-95DC-E4A87C12BC40');

INSERT INTO ClaimContactVehicle VALUES ('56C2411F-68F6-416A-B17A-4C8980D82E97', '826E3E6E-695F-498F-A519-EF20766D8E19', 'AFF05F6E-A7EA-4734-876E-831705D22C17');
INSERT INTO ClaimContactVehicle VALUES ('56C2411F-68F6-416A-B17A-4C8980D82E97', 'D2F51AC3-C2E1-429D-90F9-B5A349F9317D', '8A3FD3F7-A49C-4547-BB29-18E3A7219DD7');
INSERT INTO ClaimContactVehicle VALUES ('991D7A79-4EE8-43A0-9001-784835607EEF', '826E3E6E-695F-498F-A519-EF20766D8E19', 'AA5ABA8B-7A04-4FA9-9F07-6AFE8025C2D5');
INSERT INTO ClaimContactVehicle VALUES ('991D7A79-4EE8-43A0-9001-784835607EEF', 'D2F51AC3-C2E1-429D-90F9-B5A349F9317D', '8A3FD3F7-A49C-4547-BB29-18E3A7219DD7');
INSERT INTO ClaimContactVehicle VALUES ('E4E2FCFB-FC46-4744-AAA3-8151D1D56D75', 'C1950744-92D8-4EB8-9A64-F16FC581505E', '21CE9BF4-2BD5-4399-9880-200A7332CAA8');
INSERT INTO ClaimContactVehicle VALUES ('E4E2FCFB-FC46-4744-AAA3-8151D1D56D75', '8D797824-1338-4D0C-95DC-E4A87C12BC40', '2270CD4D-CC29-4B92-A805-A7AD30FA559B');
INSERT INTO ClaimContactVehicle VALUES ('E4E2FCFB-FC46-4744-AAA3-8151D1D56D75', 'D2F51AC3-C2E1-429D-90F9-B5A349F9317D', '8A3FD3F7-A49C-4547-BB29-18E3A7219DD7');
INSERT INTO ClaimContactVehicle VALUES ('E4E2FCFB-FC46-4744-AAA3-8151D1D56D75', '826E3E6E-695F-498F-A519-EF20766D8E19', 'AFF05F6E-A7EA-4734-876E-831705D22C17');
INSERT INTO ClaimContactVehicle VALUES ('5892BA02-D5F1-4DCC-8EB2-AAEAE9931C21', '8D797824-1338-4D0C-95DC-E4A87C12BC40', '2270CD4D-CC29-4B92-A805-A7AD30FA559B');
